<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wörter verlängern - Übungs-App</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Chalkboard SE', cursive;
        }
        
        body {
            margin: 0;
            padding: 20px;
            background-color: #f0f7ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 150, 0.1);
            border: 5px solid #4d94ff;
        }
        
        h1 {
            color: #0066cc;
            text-align: center;
            margin-top: 0;
            font-size: 2.2rem;
            text-shadow: 2px 2px 0 #cce0ff;
        }
        
        .subtitle {
            text-align: center;
            color: #3399ff;
            margin-top: -10px;
            margin-bottom: 30px;
            font-size: 1.2rem;
        }
        
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            background-color: #e6f2ff;
            color: #0066cc;
            border: 3px solid #99ccff;
        }
        
        .mode-btn:hover {
            background-color: #ccddff;
            transform: translateY(-2px);
        }
        
        .mode-btn.active {
            background-color: #4d94ff;
            color: white;
            border-color: #0066cc;
            box-shadow: 0 4px 0 #0066cc;
        }
        
        .instructions {
            background-color: #e6f2ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #4d94ff;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #004d99;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .letter-pair-display {
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            color: #cc0066;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #fff0f5;
            border-radius: 15px;
            border: 3px solid #ff99cc;
        }
        
        .word-type-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 25px;
            padding: 10px;
            border-radius: 10px;
        }
        
        .word-type-display.noun {
            background-color: #e6f7ff;
            color: #0066cc;
            border: 3px solid #99ccff;
        }
        
        .word-type-display.verb {
            background-color: #f0ffe6;
            color: #339933;
            border: 3px solid #99cc66;
        }
        
        /* Nomen-Container für Singular/Plural */
        .noun-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .noun-pair {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 15px;
            background-color: #f5faff;
            border-radius: 15px;
            border: 3px dashed #99ccff;
        }
        
        .article {
            font-size: 1.5rem;
            font-weight: bold;
            color: #6600cc;
            min-width: 50px;
        }
        
        .word-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .word-part {
            font-size: 1.8rem;
            font-weight: bold;
            padding: 5px 10px;
        }
        
        .word-gap {
            width: 50px;
            height: 50px;
            border: 3px solid #0066cc;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: white;
            font-size: 1.6rem;
            font-weight: bold;
            color: #0066cc;
        }
        
        /* Verb-Container für Infinitiv/Personalform */
        .verb-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .verb-pair {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 15px;
            background-color: #f5fff0;
            border-radius: 15px;
            border: 3px dashed #99cc66;
        }
        
        .pronoun {
            font-size: 1.5rem;
            font-weight: bold;
            color: #006600;
            min-width: 50px;
        }
        
        .options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .option-btn {
            width: 70px;
            height: 70px;
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
        }
        
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 rgba(0, 0, 0, 0.2);
        }
        
        .option-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
        }
        
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
        }
        
        #check-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        #check-btn:hover {
            background-color: #45a049;
        }
        
        #next-btn {
            background-color: #008CBA;
            color: white;
        }
        
        #next-btn:hover {
            background-color: #0077a3;
        }
        
        #hint-btn {
            background-color: #ff9800;
            color: white;
        }
        
        #hint-btn:hover {
            background-color: #e68a00;
        }
        
        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 1.4rem;
            font-weight: bold;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .correct {
            background-color: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .hint {
            background-color: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 25px;
            padding: 15px;
            background-color: #e6f2ff;
            border-radius: 10px;
            font-size: 1.1rem;
        }
        
        .progress-container {
            margin-top: 20px;
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.5s;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .word-part {
                font-size: 1.5rem;
            }
            
            .option-btn {
                width: 60px;
                height: 60px;
                font-size: 1.6rem;
            }
            
            .mode-btn {
                padding: 10px 15px;
                font-size: 1rem;
            }
            
            .article, .pronoun {
                font-size: 1.3rem;
            }
            
            .word-gap {
                width: 45px;
                height: 45px;
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Wörter verlängern</h1>
        <div class="subtitle">2. Klasse - Übe Nomen und Verben</div>
        
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="nouns">Nomen</button>
            <button class="mode-btn" data-mode="verbs">Verben</button>
        </div>
        
        <div class="letter-pair-display" id="letter-pair-display">Wähle b/p, d/t oder g/k</div>
        
        <div id="word-type-display" class="word-type-display noun">Nomen: Singular und Plural</div>
        
        <div class="instructions">
            <h3>So geht's:</h3>
            <div id="nouns-instructions">
                <ul>
                    <li>Bei Nomen siehst du Singular und Plural mit Lücken</li>
                    <li>Verlängere das Wort im Kopf, um den richtigen Buchstaben zu hören</li>
                    <li>Beispiel: "das Sie_" wird zu "Sie-be" → Also ist "b" richtig</li>
                    <li>Beispiel: "die __" wird zu "Bil-der" → Also ist "d" richtig</li>
                    <li>Wähle den richtigen Buchstaben für beide Lücken</li>
                </ul>
            </div>
            <div id="verbs-instructions" style="display: none;">
                <ul>
                    <li>Bei Verben siehst du Infinitiv und Personalform mit Lücken</li>
                    <li>Verlängere das Wort im Kopf, um den richtigen Buchstaben zu hören</li>
                    <li>Beispiel: "schie_en" wird zu "schie-ben" → Also ist "b" richtig</li>
                    <li>Beispiel: "er schie_" wird zu "er schieb-t" → Also ist "b" richtig</li>
                    <li>Wähle den richtigen Buchstaben für beide Lücken</li>
                </ul>
            </div>
        </div>
        
        <!-- Nomen-Container (Singular/Plural) -->
        <div id="nouns-exercise" class="noun-container">
            <div class="noun-pair">
                <div class="article">das</div>
                <div class="word-container">
                    <div class="word-part" id="noun-singular-part1">Sie</div>
                    <div class="word-gap noun-gap" id="noun-singular-gap">?</div>
                    <div class="word-part" id="noun-singular-part2"></div>
                </div>
            </div>
            
            <div class="noun-pair">
                <div class="article">die</div>
                <div class="word-container">
                    <div class="word-part" id="noun-plural-part1">Sie</div>
                    <div class="word-gap noun-gap" id="noun-plural-gap">?</div>
                    <div class="word-part" id="noun-plural-part2">e</div>
                </div>
            </div>
        </div>
        
        <!-- Verben-Container (Infinitiv/Personalform) -->
        <div id="verbs-exercise" class="verb-container" style="display: none;">
            <div class="verb-pair">
                <div class="word-container">
                    <div class="word-part" id="verb-infinitive-part1">schie</div>
                    <div class="word-gap verb-gap" id="verb-infinitive-gap">?</div>
                    <div class="word-part" id="verb-infinitive-part2">en</div>
                </div>
            </div>
            
            <div class="verb-pair">
                <div class="pronoun">er</div>
                <div class="word-container">
                    <div class="word-part" id="verb-conjugated-part1">schie</div>
                    <div class="word-gap verb-gap" id="verb-conjugated-gap">?</div>
                    <div class="word-part" id="verb-conjugated-part2">t</div>
                </div>
            </div>
        </div>
        
        <div class="options" id="options-container">
            <!-- Option buttons werden dynamisch erstellt -->
        </div>
        
        <div class="btn-group">
            <button class="action-btn" id="hint-btn">Tipp</button>
            <button class="action-btn" id="check-btn">Prüfen</button>
            <button class="action-btn" id="next-btn">Nächstes Wort</button>
        </div>
        
        <div class="feedback" id="feedback">
            Wähle zuerst Nomen oder Verben oben aus
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="stats">
            <div>Richtig: <span id="correct-count">0</span></div>
            <div>Falsch: <span id="incorrect-count">0</span></div>
            <div>Wörter: <span id="word-count">0</span>/8</div>
        </div>
    </div>

    <script>
        // Datenbank mit Übungswörtern
        const wordGroups = {
            // Nomen (Singular/Plural)
            nouns: [
                { 
                    singular: { part1: "Sie", part2: "", gapIndex: 3, correct: "b" },
                    plural: { part1: "Sie", part2: "e", gapIndex: 3, correct: "b" },
                    fullWord: "Sieb",
                    hint: "Singular: Sieb (wie Sie-be), Plural: Siebe"
                },
                { 
                    singular: { part1: "Kal", part2: "", gapIndex: 3, correct: "b" },
                    plural: { part1: "Käl", part2: "er", gapIndex: 3, correct: "b" },
                    fullWord: "Kalb",
                    hint: "Singular: Kalb (wie Kal-be), Plural: Kälber"
                },
                { 
                    singular: { part1: "Sta", part2: "", gapIndex: 3, correct: "b" },
                    plural: { part1: "Stä", part2: "e", gapIndex: 3, correct: "b" },
                    fullWord: "Stab",
                    hint: "Singular: Stab (wie Sta-be), Plural: Stäbe"
                },
                { 
                    singular: { part1: "Kor", part2: "", gapIndex: 3, correct: "b" },
                    plural: { part1: "Kör", part2: "e", gapIndex: 3, correct: "b" },
                    fullWord: "Korb",
                    hint: "Singular: Korb (wie Kor-be), Plural: Körbe"
                },
                { 
                    singular: { part1: "Gra", part2: "", gapIndex: 3, correct: "b" },
                    plural: { part1: "Grä", part2: "er", gapIndex: 3, correct: "b" },
                    fullWord: "Grab",
                    hint: "Singular: Grab (wie Gra-ber), Plural: Gräber"
                },
                { 
                    singular: { part1: "Ra", part2: "", gapIndex: 2, correct: "d" },
                    plural: { part1: "Rä", part2: "er", gapIndex: 2, correct: "d" },
                    fullWord: "Rad",
                    hint: "Singular: Rad (wie Rä-der), Plural: Räder"
                },
                { 
                    singular: { part1: "Bil", part2: "", gapIndex: 3, correct: "d" },
                    plural: { part1: "Bil", part2: "er", gapIndex: 3, correct: "d" },
                    fullWord: "Bild",
                    hint: "Singular: Bild (wie Bil-der), Plural: Bilder"
                },
                { 
                    singular: { part1: "Stif", part2: "", gapIndex: 4, correct: "t" },
                    plural: { part1: "Stif", part2: "e", gapIndex: 4, correct: "t" },
                    fullWord: "Stift",
                    hint: "Singular: Stift (wie Stif-te), Plural: Stifte"
                },
                { 
                    singular: { part1: "Pfer", part2: "", gapIndex: 4, correct: "d" },
                    plural: { part1: "Pfer", part2: "e", gapIndex: 4, correct: "d" },
                    fullWord: "Pferd",
                    hint: "Singular: Pferd (wie Pfer-de), Plural: Pferde"
                },
                { 
                    singular: { part1: "Bro", part2: "", gapIndex: 3, correct: "t" },
                    plural: { part1: "Bro", part2: "e", gapIndex: 3, correct: "t" },
                    fullWord: "Brot",
                    hint: "Singular: Brot (wie Bro-te), Plural: Brote"
                },
                { 
                    singular: { part1: "Ta", part2: "", gapIndex: 2, correct: "g" },
                    plural: { part1: "Ta", part2: "e", gapIndex: 2, correct: "g" },
                    fullWord: "Tag",
                    hint: "Singular: Tag (wie Ta-ge), Plural: Tage"
                },
                { 
                    singular: { part1: "Ber", part2: "", gapIndex: 3, correct: "g" },
                    plural: { part1: "Ber", part2: "e", gapIndex: 3, correct: "g" },
                    fullWord: "Berg",
                    hint: "Singular: Berg (wie Ber-ge), Plural: Berge"
                },
                { 
                    singular: { part1: "We", part2: "", gapIndex: 2, correct: "g" },
                    plural: { part1: "We", part2: "e", gapIndex: 2, correct: "g" },
                    fullWord: "Weg",
                    hint: "Singular: Weg (wie We-ge), Plural: Wege"
                },
                { 
                    singular: { part1: "Zwer", part2: "", gapIndex: 4, correct: "g" },
                    plural: { part1: "Zwer", part2: "e", gapIndex: 4, correct: "g" },
                    fullWord: "Zwerg",
                    hint: "Singular: Zwerg (wie Zwer-ge), Plural: Zwerge"
                },
                { 
                    singular: { part1: "Fabri", part2: "", gapIndex: 5, correct: "k" },
                    plural: { part1: "Fabri", part2: "en", gapIndex: 5, correct: "k" },
                    fullWord: "Fabrik",
                    hint: "Singular: Fabrik (wie Fabri-ken), Plural: Fabriken"
                }
            ],
            
            // Verben (Infinitiv/Personalform)
            verbs: [
                { 
                    infinitive: { part1: "schie", part2: "en", gapIndex: 5, correct: "b" },
                    conjugated: { part1: "schie", part2: "t", gapIndex: 5, correct: "b" },
                    fullWord: "schieben",
                    hint: "Infinitiv: schieben (wie schie-ben), er schiebt"
                },
                { 
                    infinitive: { part1: "kle", part2: "en", gapIndex: 3, correct: "b" },
                    conjugated: { part1: "kle", part2: "t", gapIndex: 3, correct: "b" },
                    fullWord: "kleben",
                    hint: "Infinitiv: kleben (wie kle-ben), er klebt"
                },
                { 
                    infinitive: { part1: "pie", part2: "en", gapIndex: 3, correct: "p" },
                    conjugated: { part1: "pie", part2: "t", gapIndex: 3, correct: "p" },
                    fullWord: "piepen",
                    hint: "Infinitiv: piepen (wie pie-pen), er piept"
                },
                { 
                    infinitive: { part1: "mer", part2: "en", gapIndex: 3, correct: "k" },
                    conjugated: { part1: "mer", part2: "t", gapIndex: 3, correct: "k" },
                    fullWord: "merken",
                    hint: "Infinitiv: merken (wie mer-ken), er merkt"
                },
                { 
                    infinitive: { part1: "wie", part2: "en", gapIndex: 3, correct: "g" },
                    conjugated: { part1: "wie", part2: "t", gapIndex: 3, correct: "g" },
                    fullWord: "wiegen",
                    hint: "Infinitiv: wiegen (wie wie-gen), er wiegt"
                },
                { 
                    infinitive: { part1: "par", part2: "en", gapIndex: 3, correct: "k" },
                    conjugated: { part1: "par", part2: "t", gapIndex: 3, correct: "k" },
                    fullWord: "parken",
                    hint: "Infinitiv: parken (wie par-ken), er parkt"
                },
                { 
                    infinitive: { part1: "sie", part2: "en", gapIndex: 3, correct: "g" },
                    conjugated: { part1: "sie", part2: "t", gapIndex: 3, correct: "g" },
                    fullWord: "siegen",
                    hint: "Infinitiv: siegen (wie sie-gen), er siegt"
                }
            ]
        };
        
        // App-Zustand
        let currentMode = "nouns";
        let currentWords = [];
        let currentWordIndex = 0;
        let selectedOption = null;
        let correctCount = 0;
        let incorrectCount = 0;
        let wordCount = 0;
        const wordsPerRound = 8;
        
        // DOM-Elemente
        const wordTypeDisplay = document.getElementById('word-type-display');
        const letterPairDisplay = document.getElementById('letter-pair-display');
        const nounsInstructions = document.getElementById('nouns-instructions');
        const verbsInstructions = document.getElementById('verbs-instructions');
        const nounsExercise = document.getElementById('nouns-exercise');
        const verbsExercise = document.getElementById('verbs-exercise');
        const optionsContainer = document.getElementById('options-container');
        const checkButton = document.getElementById('check-btn');
        const nextButton = document.getElementById('next-btn');
        const hintButton = document.getElementById('hint-btn');
        const feedbackElement = document.getElementById('feedback');
        const correctCountElement = document.getElementById('correct-count');
        const incorrectCountElement = document.getElementById('incorrect-count');
        const wordCountElement = document.getElementById('word-count');
        const progressBarElement = document.getElementById('progress-bar');
        const modeButtons = document.querySelectorAll('.mode-btn');
        
        // DOM-Elemente für Nomen
        const nounSingularPart1 = document.getElementById('noun-singular-part1');
        const nounSingularGap = document.getElementById('noun-singular-gap');
        const nounSingularPart2 = document.getElementById('noun-singular-part2');
        const nounPluralPart1 = document.getElementById('noun-plural-part1');
        const nounPluralGap = document.getElementById('noun-plural-gap');
        const nounPluralPart2 = document.getElementById('noun-plural-part2');
        
        // DOM-Elemente für Verben
        const verbInfinitivePart1 = document.getElementById('verb-infinitive-part1');
        const verbInfinitiveGap = document.getElementById('verb-infinitive-gap');
        const verbInfinitivePart2 = document.getElementById('verb-infinitive-part2');
        const verbConjugatedPart1 = document.getElementById('verb-conjugated-part1');
        const verbConjugatedGap = document.getElementById('verb-conjugated-gap');
        const verbConjugatedPart2 = document.getElementById('verb-conjugated-part2');
        
        // Initialisierung
        function init() {
            // Standard-Modus aktivieren
            setMode("nouns");
            
            // Event-Listener für Modus-Buttons
            modeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const mode = button.getAttribute('data-mode');
                    setMode(mode);
                });
            });
            
            // Event-Listener für Aktions-Buttons
            checkButton.addEventListener('click', checkAnswer);
            nextButton.addEventListener('click', nextWord);
            hintButton.addEventListener('click', showHint);
        }
        
        // Modus setzen
        function setMode(mode) {
            // Aktiven Button markieren
            modeButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-mode') === mode) {
                    btn.classList.add('active');
                }
            });
            
            currentMode = mode;
            currentWords = [...wordGroups[mode]];
            currentWordIndex = 0;
            wordCount = 0;
            correctCount = 0;
            incorrectCount = 0;
            
            // Anzeige je nach Modus anpassen
            if (mode === "nouns") {
                wordTypeDisplay.textContent = "Nomen: Singular und Plural";
                wordTypeDisplay.className = "word-type-display noun";
                nounsInstructions.style.display = "block";
                verbsInstructions.style.display = "none";
                nounsExercise.style.display = "flex";
                verbsExercise.style.display = "none";
                letterPairDisplay.textContent = "Finde den richtigen Buchstaben für Singular und Plural";
            } else {
                wordTypeDisplay.textContent = "Verben: Infinitiv und Personalform";
                wordTypeDisplay.className = "word-type-display verb";
                nounsInstructions.style.display = "none";
                verbsInstructions.style.display = "block";
                nounsExercise.style.display = "none";
                verbsExercise.style.display = "flex";
                letterPairDisplay.textContent = "Finde den richtigen Buchstaben für Infinitiv und Personalform";
            }
            
            // Option-Buttons erstellen (basierend auf aktuellen Wörtern)
            createOptionButtons();
            
            // Erstes Wort laden
            loadWord();
            updateStats();
            updateProgressBar();
            
            // Feedback zurücksetzen
            feedbackElement.textContent = "Wähle einen Buchstaben und klicke auf 'Prüfen'";
            feedbackElement.className = 'feedback';
            
            // Buttons zurücksetzen
            nextButton.disabled = true;
            checkButton.disabled = false;
            hintButton.disabled = false;
        }
        
        // Option-Buttons erstellen
        function createOptionButtons() {
            optionsContainer.innerHTML = '';
            
            // Basierend auf dem aktuellen Wort bestimmen, welche Buchstaben möglich sind
            const currentWord = currentWords[currentWordIndex % currentWords.length];
            let correctLetter = "";
            
            if (currentMode === "nouns") {
                correctLetter = currentWord.singular.correct;
            } else {
                correctLetter = currentWord.infinitive.correct;
            }
            
            // Bestimme mögliche Alternativen basierend auf dem korrekten Buchstaben
            let possibleLetters = [];
            
            // b/p Paar
            if (correctLetter === "b" || correctLetter === "p") {
                possibleLetters = ["b", "p"];
            }
            // d/t Paar
            else if (correctLetter === "d" || correctLetter === "t") {
                possibleLetters = ["d", "t"];
            }
            // g/k Paar
            else if (correctLetter === "g" || correctLetter === "k") {
                possibleLetters = ["g", "k"];
            }
            
            // Für jeden Buchstaben einen Button erstellen
            possibleLetters.forEach(letter => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.setAttribute('data-option', letter);
                button.textContent = letter;
                
                // Farbe für den Button basierend auf Buchstabenpaar
                if (letter === "b" || letter === "p") {
                    button.style.backgroundColor = "#ff3366";
                } else if (letter === "d" || letter === "t") {
                    button.style.backgroundColor = "#339933";
                } else {
                    button.style.backgroundColor = "#3366cc";
                }
                
                button.addEventListener('click', () => {
                    // Markiere den ausgewählten Button
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        btn.style.boxShadow = "0 4px 0 rgba(0, 0, 0, 0.2)";
                    });
                    
                    button.style.boxShadow = "0 4px 0 #003366";
                    
                    selectedOption = letter;
                    
                    // Buchstaben in alle Lücken eintragen
                    if (currentMode === "nouns") {
                        nounSingularGap.textContent = selectedOption;
                        nounPluralGap.textContent = selectedOption;
                    } else {
                        verbInfinitiveGap.textContent = selectedOption;
                        verbConjugatedGap.textContent = selectedOption;
                    }
                    
                    feedbackElement.textContent = `Ausgewählt: ${selectedOption}. Klicke auf "Prüfen"!`;
                    feedbackElement.className = 'feedback';
                });
                
                optionsContainer.appendChild(button);
            });
        }
        
        // Wort laden
        function loadWord() {
            // Mische die Wörter für Abwechslung
            if (currentWordIndex === 0) {
                shuffleArray(currentWords);
            }
            
            const wordData = currentWords[currentWordIndex % currentWords.length];
            
            if (currentMode === "nouns") {
                // Nomen anzeigen
                nounSingularPart1.textContent = wordData.singular.part1;
                nounSingularPart2.textContent = wordData.singular.part2;
                nounSingularGap.textContent = "?";
                
                nounPluralPart1.textContent = wordData.plural.part1;
                nounPluralPart2.textContent = wordData.plural.part2;
                nounPluralGap.textContent = "?";
                
                // Lücken zurücksetzen
                nounSingularGap.style.backgroundColor = 'white';
                nounSingularGap.style.color = '#0066cc';
                nounPluralGap.style.backgroundColor = 'white';
                nounPluralGap.style.color = '#0066cc';
            } else {
                // Verben anzeigen
                verbInfinitivePart1.textContent = wordData.infinitive.part1;
                verbInfinitivePart2.textContent = wordData.infinitive.part2;
                verbInfinitiveGap.textContent = "?";
                
                verbConjugatedPart1.textContent = wordData.conjugated.part1;
                verbConjugatedPart2.textContent = wordData.conjugated.part2;
                verbConjugatedGap.textContent = "?";
                
                // Lücken zurücksetzen
                verbInfinitiveGap.style.backgroundColor = 'white';
                verbInfinitiveGap.style.color = '#0066cc';
                verbConjugatedGap.style.backgroundColor = 'white';
                verbConjugatedGap.style.color = '#0066cc';
            }
            
            // Option-Buttons neu erstellen
            createOptionButtons();
            
            // Auswahl zurücksetzen
            selectedOption = null;
            
            // Nächster Wort-Button deaktivieren
            nextButton.disabled = true;
            checkButton.disabled = false;
        }
        
        // Antwort prüfen
        function checkAnswer() {
            if (!selectedOption) {
                feedbackElement.textContent = "Bitte wähle zuerst einen Buchstaben aus!";
                feedbackElement.className = 'feedback hint';
                return;
            }
            
            const currentWord = currentWords[currentWordIndex % currentWords.length];
            let isCorrect = false;
            let correctLetter = "";
            
            if (currentMode === "nouns") {
                // Prüfe Singular und Plural
                const singularCorrect = selectedOption === currentWord.singular.correct;
                const pluralCorrect = selectedOption === currentWord.plural.correct;
                isCorrect = singularCorrect && pluralCorrect;
                correctLetter = currentWord.singular.correct;
            } else {
                // Prüfe Infinitiv und Personalform
                const infinitiveCorrect = selectedOption === currentWord.infinitive.correct;
                const conjugatedCorrect = selectedOption === currentWord.conjugated.correct;
                isCorrect = infinitiveCorrect && conjugatedCorrect;
                correctLetter = currentWord.infinitive.correct;
            }
            
            // Feedback anzeigen
            if (isCorrect) {
                feedbackElement.textContent = `Richtig! Das Wort ist "${currentWord.fullWord}". Gut gemacht!`;
                feedbackElement.className = 'feedback correct';
                correctCount++;
                
                // Lücken grün markieren
                if (currentMode === "nouns") {
                    nounSingularGap.style.backgroundColor = '#d4edda';
                    nounPluralGap.style.backgroundColor = '#d4edda';
                } else {
                    verbInfinitiveGap.style.backgroundColor = '#d4edda';
                    verbConjugatedGap.style.backgroundColor = '#d4edda';
                }
            } else {
                feedbackElement.textContent = `Fast! Richtig wäre "${correctLetter}" gewesen. Das Wort ist "${currentWord.fullWord}".`;
                feedbackElement.className = 'feedback incorrect';
                incorrectCount++;
                
                // Lücken rot markieren
                if (currentMode === "nouns") {
                    nounSingularGap.style.backgroundColor = '#f8d7da';
                    nounPluralGap.style.backgroundColor = '#f8d7da';
                } else {
                    verbInfinitiveGap.style.backgroundColor = '#f8d7da';
                    verbConjugatedGap.style.backgroundColor = '#f8d7da';
                }
                
                // Richtigen Buchstaben anzeigen
                setTimeout(() => {
                    if (currentMode === "nouns") {
                        nounSingularGap.textContent = correctLetter;
                        nounPluralGap.textContent = correctLetter;
                        nounSingularGap.style.color = '#155724';
                        nounPluralGap.style.color = '#155724';
                    } else {
                        verbInfinitiveGap.textContent = correctLetter;
                        verbConjugatedGap.textContent = correctLetter;
                        verbInfinitiveGap.style.color = '#155724';
                        verbConjugatedGap.style.color = '#155724';
                    }
                }, 500);
            }
            
            // Buttons aktualisieren
            checkButton.disabled = true;
            nextButton.disabled = false;
            
            // Statistik aktualisieren
            updateStats();
        }
        
        // Tipp anzeigen
        function showHint() {
            const currentWord = currentWords[currentWordIndex % currentWords.length];
            feedbackElement.textContent = `Tipp: ${currentWord.hint}`;
            feedbackElement.className = 'feedback hint';
        }
        
        // Nächstes Wort laden
        function nextWord() {
            currentWordIndex++;
            wordCount++;
            
            if (wordCount >= wordsPerRound) {
                // Runde beendet
                const accuracy = Math.round((correctCount / (correctCount + incorrectCount)) * 100) || 0;
                feedbackElement.textContent = `Super! Du hast ${wordsPerRound} Wörter bearbeitet. Du hattest ${correctCount} richtige und ${incorrectCount} falsche Antworten (${accuracy}% richtig).`;
                feedbackElement.className = 'feedback correct';
                nextButton.disabled = true;
                checkButton.disabled = true;
                hintButton.disabled = true;
                document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);
                return;
            }
            
            loadWord();
            updateStats();
            updateProgressBar();
        }
        
        // Array mischen
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Statistik aktualisieren
        function updateStats() {
            correctCountElement.textContent = correctCount;
            incorrectCountElement.textContent = incorrectCount;
            wordCountElement.textContent = wordCount;
        }
        
        // Fortschrittsbalken aktualisieren
        function updateProgressBar() {
            const progress = (wordCount / wordsPerRound) * 100;
            progressBarElement.style.width = `${progress}%`;
        }
        
        // App starten
        init();
    </script>
</body>
</html>
